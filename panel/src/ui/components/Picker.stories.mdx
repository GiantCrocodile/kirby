import { Meta, Preview, Story, Props } from '@storybook/addon-docs/blocks';
import { action } from "@storybook/addon-actions";
import Padding from "../../../storybook/theme/Padding.js";
import items from "../../../storybook/data/Items.js"
import Picker from "./Picker.vue";

<Meta
  title="UI | Data / Picker"
  component={Picker}
  decorators={[Padding]}
/>

# Picker
### `<k-picker>`


export const regular = () => ({
  data() {
    return {
      selected: []
    };
  },
  computed: {
    options() {
      return items(10, 1).map(item => {
        delete item.options;
        return item;
      });
    }
  },
  methods: {
    onSelect(selected) {
      action("select")(selected);
    }
  },
});

<Preview>
  <Story name="Single">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            :options="options"
            v-model="selected"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

<Props of={Picker} />


### Multiple
<Preview>
  <Story name="Multiple">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            :multiple="true"
            :options="options"
            v-model="selected"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Max
<Preview>
  <Story name="Max">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            :max="5"
            :multiple="true"
            :options="options"
            v-model="selected"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Cardlets
<Preview>
  <Story name="Cardlets">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            v-model="selected"
            :multiple="true"
            :options="options"
            layout="cardlet"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Cards
<Preview>
  <Story name="Cards">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            v-model="selected"
            :multiple="true"
            :options="options"
            layout="card"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Pagination
<Preview>
  <Story name="Pagination">
    {{
      extends: regular(),
      data() {
        return {
          selected: [],
          pagination: {
            page: 1,
            limit: 2,
            total: 20
          }
        };
      },
      computed: {
        options() {
          let items = items(
            this.pagination.limit,
            ((this.pagination.page - 1) * this.pagination.limit) + 1
          );
          return items.map(item => {
            delete item.options;
            return item;
          });
        }
      },
      methods: {
        onSelect(selected) {
          action("select")(selected);
        },
        onPaginate(pagination) {
          this.pagination.page = pagination.page;
          action("paginate")(pagination);
        }
      },
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            v-model="selected"
            :options="options"
            :multiple="true"
            :pagination="pagination"
            class="mb-8"
            @select="onSelect"
            @paginate="onPaginate"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Custom toggle
<Preview>
  <Story name="Custom toggle">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            v-model="selected"
            :multiple="true"
            :options="options"
            :toggle="(item, selected, max) => {
              if (selected) {
                return {
                  icon: 'remove',
                  color: 'green',
                  tooltip: 'Remove'
                };
              } else {
                return {
                  icon: 'add',
                  tooltip: 'Add'
                };
              }
            }"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

## CSS class

`.k-picker`
