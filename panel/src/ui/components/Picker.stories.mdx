import { Meta, Preview, Story, Props } from '@storybook/addon-docs/blocks';
import Padding from "../storybook/Padding.js";
import Picker from "./Picker.vue";
import { action } from "@storybook/addon-actions";

<Meta
  title="UI | Data / Picker / Picker"
  component={Picker}
  decorators={[Padding]}
/>

# Picker
### `<k-picker>`


```html
<k-picker
  :options="options"
  :multiple="true"
  :pagination="pagination"
  :sortable="true"
/>
```

<Props of={Picker} />

export const regular = () => ({
  data() {
    return {
      selected: []
    };
  },
  computed: {
    options() {
      return [...Array(10).keys()].map(item => {
        const id = item;
        return {
          id: "_" + id,
          title: "List item no. " + id,
          info: "List item info",
          link: "https://getkirby.com",
          image: {
            url: "https://source.unsplash.com/user/erondu/1600x900?" + id
          }
        };
      });
    }
  },
  methods: {
    onSelect(selected) {
      action("select")(selected);
    }
  },
});

### Single
<Preview>
  <Story name="Single">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            :options="options"
            v-model="selected"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Multiple
<Preview>
  <Story name="Multiple">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            :multiple="true"
            :options="options"
            v-model="selected"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Max
<Preview>
  <Story name="Max">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            :max="5"
            :multiple="true"
            :options="options"
            v-model="selected"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Cardlets
<Preview>
  <Story name="Cardlets">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            v-model="selected"
            :multiple="true"
            :options="options"
            layout="cardlet"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Cards
<Preview>
  <Story name="Cards">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            v-model="selected"
            :multiple="true"
            :options="options"
            layout="card"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Pagination
<Preview>
  <Story name="Pagination">
    {{
      extends: regular(),
      data() {
        return {
          start: 1,
          selected: [],
          pagination: {
            total: 230,
            limit: 2
          }
        };
      },
      methods: {
        onSelect(selected) {
          action("select")(selected);
        },
        onPaginate(pagination) {
          action("paginate")(pagination);
          this.start = pagination.start;
        }
      },
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            :multiple="true"
            :options="options"
            :pagination="pagination"
            v-model="selected"
            class="mb-8"
            @select="onSelect"
            @paginate="onPaginate"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

### Custom toggle
<Preview>
  <Story name="Custom toggle">
    {{
      extends: regular(),
      template: `
        <div>
          <k-headline class="mb-3">Picker</k-headline>
          <k-picker
            v-model="selected"
            :multiple="true"
            :options="options"
            :toggle="(item, selected, max) => {
              if (selected) {
                return {
                  icon: 'remove',
                  color: 'green',
                  tooltip: 'Remove'
                };
              } else {
                return {
                  icon: 'add',
                  tooltip: 'Add'
                };
              }
            }"
            class="mb-8"
            @select="onSelect"
          />
          <k-headline class="mb-3">Selected</k-headline>
          <k-code-block :code="selected" />
        </div>
      `
    }}
  </Story>
</Preview>

## CSS class

`.k-picker`
